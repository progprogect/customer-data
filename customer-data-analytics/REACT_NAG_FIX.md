# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ React –æ—à–∏–±–æ–∫ –∏ API –ø—Ä–æ–±–ª–µ–º

## ‚úÖ –ü—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–µ–Ω—ã

### **–ü—Ä–æ–±–ª–µ–º–∞ 1: React –æ—à–∏–±–∫–∞ NaN**
```
[Error] Received NaN for the `value` attribute. If this is expected, cast the value to a string.
```

### **–ü—Ä–æ–±–ª–µ–º–∞ 2: API –æ—à–∏–±–∫–∞ 422**
```
Failed to load resource: the server responded with a status of 422 (Unprocessable Content)
```

---

## üõ†Ô∏è –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### **1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ NaN –≤ –ø–æ–ª—è—Ö –≤–≤–æ–¥–∞:**

**–ë—ã–ª–æ:**
```typescript
onChange={(e) => setThreshold(parseInt(e.target.value) / 100)}
onChange={(e) => setLimit(parseInt(e.target.value))}
```

**–°—Ç–∞–ª–æ:**
```typescript
onChange={(e) => {
  const value = parseInt(e.target.value)
  if (!isNaN(value)) {
    setThreshold(value / 100)
  }
}}

onChange={(e) => {
  const value = parseInt(e.target.value)
  if (!isNaN(value) && value > 0) {
    setLimit(value)
  }
}}
```

### **2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω API –∑–∞–ø—Ä–æ—Å:**

**–ë—ã–ª–æ:**
```typescript
fetch(`${API_BASE}/high-risk-users?threshold=${currentThreshold}&limit=${currentLimit}`, {
```

**–°—Ç–∞–ª–æ:**
```typescript
fetch(`${API_BASE}/high-risk-users?threshold=${currentThreshold}&limit=${currentLimit}&snapshot_date=2025-07-14`, {
```

### **3. –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è:**

- ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ NaN**: `!isNaN(value)` –ø–µ—Ä–µ–¥ —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π —Å–æ—Å—Ç–æ—è–Ω–∏—è
- ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π**: `value > 0` –¥–ª—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤
- ‚úÖ **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä**: `snapshot_date` –≤ API –∑–∞–ø—Ä–æ—Å–µ

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

**‚úÖ –û–±–µ –ø—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–µ–Ω—ã:**

1. **React –æ—à–∏–±–∫–∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã** - –Ω–µ—Ç –±–æ–ª—å—à–µ NaN –∑–Ω–∞—á–µ–Ω–∏–π
2. **API —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ** - –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä `snapshot_date`
3. **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∞** - –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
4. **UX —É–ª—É—á—à–µ–Ω** - –ø–æ–ª—è –≤–≤–æ–¥–∞ —Ä–∞–±–æ—Ç–∞—é—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ

### **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**

```bash
# API —Ç–µ—Å—Ç - —Ä–∞–±–æ—Ç–∞–µ—Ç
curl "http://localhost:8000/api/v1/churn/high-risk-users?threshold=0.6&limit=5&snapshot_date=2025-07-14"
# ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç 4 –∫–ª–∏–µ–Ω—Ç–∞ —Å —Ä–∏—Å–∫–æ–º –æ—Ç—Ç–æ–∫–∞

# React —Ç–µ—Å—Ç - –Ω–µ—Ç NaN –æ—à–∏–±–æ–∫
# ‚úÖ –ü–æ–ª—è –≤–≤–æ–¥–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –ø—É—Å—Ç—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
# ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
```

---

## üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### **–í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª–µ–π:**
- **–ü–æ—Ä–æ–≥ —Ä–∏—Å–∫–∞**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ NaN, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ –¥–µ—Å—è—Ç–∏—á–Ω—É—é –¥—Ä–æ–±—å
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª–∏–µ–Ω—Ç–æ–≤**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ NaN –∏ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
- **API –ø–∞—Ä–∞–º–µ—Ç—Ä—ã**: –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π `snapshot_date` –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã

### **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:**
- **Graceful degradation**: –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ, —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è
- **User feedback**: –ü–æ–ª—è –æ—Å—Ç–∞—é—Ç—Å—è –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–º –≤–∞–ª–∏–¥–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏
- **No crashes**: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –ø–∞–¥–∞–µ—Ç –ø—Ä–∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–º –≤–≤–æ–¥–µ

---

## üèÜ –ò—Ç–æ–≥

**‚úÖ –í—Å–µ –æ—à–∏–±–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã!**

- **React –æ—à–∏–±–∫–∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã** - –Ω–µ—Ç NaN –∑–Ω–∞—á–µ–Ω–∏–π –≤ –ø–æ–ª—è—Ö –≤–≤–æ–¥–∞
- **API —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ** - –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- **–í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç** - –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- **UX —É–ª—É—á—à–µ–Ω** - —Å—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –ø–æ–ª–µ–π –≤–≤–æ–¥–∞

–§—Ä–æ–Ω—Ç–µ–Ω–¥ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫ –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å API!
